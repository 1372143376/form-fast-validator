function Validator(t,r){this.form=t,this._data={},this._options=r||{},this._container={},this._cache={}}Validator.prototype._error=function(t){throw new Error(t)},Validator.prototype._isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},Validator.prototype.add=function(t,r){var i=this.form[t],e=this._container,n=this._options,o=n.className||"",a=n.type||"SPAN",s=n.text||"",f=n._isArray,p=this._error;i||p(t+"字段不存在"),r||f(r)||r.length<1||p(t+"字段未指定验证策略"),i.insertAdjacentHTML("afterend","<"+a+' class="'+o+'">'+s+"</"+a+">"),e[t]=[];for(var u,h=0;u=r[h++];){var c=u[0].split(":"),l=c.shift(),d=this[l],y=u[1],_=this;d||p(t+"字段的"+l+"验证策略未定义"),e[t].push(function(t,r,e){return function(){var n=[].concat(i.value,t,r);return e.apply(_,n)}}(c,y,d))}return this},Validator.prototype.result=function(t){function r(t){var r,s=e[t],f=s.value,p=a[t]=a[t]||{};p[f]?i(s,p[f]):(r=function(t,r){for(var e,n,a=o[r],s=0;n=a[s++];)if(e=n(),function(t){t.nextElementSibling.innerText=""}(t),e)return i(t,e)}(s,t))&&(p[f]=r),n[t]=f}function i(t,r){return t.nextElementSibling.innerText=r,f=!1,r}var e=this.form,n=this._data,o=this._container,a=this._cache,s=this._error,f=!0;if("string"==typeof t)t||e[t]||s(t+"字段未注册"),r(t);else for(var p in o)r(p);return f},Validator.prototype.getData=function(){var t=this._data,r=(this._isArray,JSON.parse(JSON.stringify(t)));if(arguments.length<1)return r;for(var i,e=0;i=arguments[e++];)i&&delete r[i];return this._cache={},r},Validator.prototype.notEmpty=function(t,r){if(""===t)return r},Validator.prototype.min=function(t,r,i){if(t.length<r)return i},Validator.prototype.max=function(t,r,i){if(t.length>r)return i},Validator.prototype.test=function(t,r,i){if(reg=this._insidePattern[r],reg||this._error(r+"正则未定义"),"string"==typeof reg&&(p=reg.replace(/^\/|\/.*$/g,""),f=reg.match(/[igm]$/),reg=new RegExp(p,f?f[0]:void 0)),!reg.test(t))return i},Validator.prototype.equal=function(t,r,i){if(t!==this.form[r].value)return i},Validator.prototype._insidePattern={email:/^[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?$/,phone:/^((13[0-9])|(14[5|7])|(15([0-3]|[5-9]))|(18[0,5-9]))\d{8}$/,id:/^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/,qq:/^[1-9][0-9]{4,10}$/,weChat:/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/,zipCode:/^[1-9]d{5}(?!d)^/},Validator.prototype.pattern=function(t,r,i){var e=this._insidePattern;if(!i)for(var n in e)if(n===t)return console.log("警告:"+t+"正则已存在"),this;return e[t]=r,this};